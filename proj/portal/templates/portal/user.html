{% extends "base.html" %}
<!-- {karma, rank, about}>-->
{% load markdown_deux_tags %}
{% block title %} {{ user.username }} {% endblock %}
{% block content %}
<style>
#edit { /*I had to position the button in a ghetto way */
   position: relative;
   top: -34px;
}
</style>

<br>
<div class="page-header">
  <h1> {{ user.username }}
  <span class="label label-success pull-right" title="karma points"> {{ karma }}</span>
  </h1>
  <div class="list-group">
    <a class="list-group-item">
      <h4>Date joined: {{ user.date_joined|date }}</h4>
    </a>
    <a class="list-group-item">
      <h4>Rank: {{ rank }}</h4>
    </a>
    <a class="list-group-item">
   {% block formspot %} <!--Include/Exclude the "about" text when the user is utilizing a form-->
      <h4>About Me:</h4>
      {{ about }}
   {% endblock %}
      <!-- TODO: Supply a button to redirect the user to a page with a form
      to fill in their about-me.-->
      <a href={% url 'portal.views.edit_about' user.id %}> 
      <button class="btn btn-default pull-right" type="submit" title="edit" id="edit">
         <span class="glyphicon glyphicon-edit"</span>
         </button>
        </a>
        <!-- Display the form for 'about me' info  TODO: Try using this to override the "About me" entry!-->
        <!-- block formspot endblock -->
    </a>
  <div/>
</div>
<h1> Reviews</h1>
<ul class="list-group">
    {% for rev in user.review_set.all %}
      <div class="panel panel-default">
        <div class="panel-heading">
            <h4>
              <span class="label label-success pull-right" title="karma points"> {{ rev.karma }}</span>
            </h4>
          <h3 class="panel-title"><p class="text-primary">
            <a href={% url 'portal.views.review' rev.id %}>
              {{ rev.title }}</a> </p>by {{ rev.author_id }}
          </h3>
          <h4>
            <span class="label label-danger pull-right" title="reports"> {{ rev.reported_count }} </span>
            </h4>
          {{ rev.pub_date|date }}
        </div>
        <div class="panel-body">
          {{ rev.preview|markdown}}
        </div>
      </div>
    {% endfor %}
    </ul>

{% endblock %}
